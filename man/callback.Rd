% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/callback.R
\docType{data}
\name{callback}
\alias{ChunkCallback}
\alias{DataFrameCallback}
\alias{SideEffectChunkCallback}
\alias{callback}
\title{Callback classes}
\description{
These classes are used to define callback behaviors.
}
\details{
\describe{
 \item{ChunkCallback}{Callback interface definition, all callback functions should inherit from this class.}
 \item{SideEffectChunkCallback}{Callback function that is used only for side effects, no results are returned.}
 \item{DataFrameCallback}{Callback function that combines each result together at the end.}
}
}
\examples{
con <- dbConnect(RSQLite::SQLite(), ":memory:")
dbWriteTable(con, "cars", cars)

## Side effects
# Ex: return FALSE to stop once you found what you're looking for
rowCount <- 0
callback <- function(df, index) {
  rowCount <<- rowCount + nrow(df)
  if (df$speed == 19 && df$dist == 46) {
    print(paste("Your row is number", rowCount))
    FALSE
   }
 }

# explicitly declare this as a side effects callback:
dbGetChunkedQuery(con, "SELECT * FROM cars",
  SideEffectChunkCallback$new(callback), n = 5)

# or implicitly: if given a regular function, it is automatically
# converted to a SideEffectChunkCallback
dbGetChunkedQuery(con, "SELECT * FROM cars", callback, n = 5)

## If combined results are desired, you can use the DataFrameCallback

distSum <- 0
rowCount <- 0
callback <- function(df, index) {
  distSum <<- distSum + sum(df$dist)
  rowCount <<- rowCount + nrow(df)
}
rs <- dbGetChunkedQuery(con, "SELECT * FROM cars",
  DataFrameCallback$new(callback), n = 10)

dbDisconnect(con)
}
\keyword{datasets}
\keyword{internal}

